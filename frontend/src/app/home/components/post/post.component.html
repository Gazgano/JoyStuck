<!-- Usual card -->
<mat-card *ngIf="postDesign.componentStyle === 0" class="PostCard">
    <mat-card-header>
        <img mat-card-avatar src="assets/images/gazgano-picture-64px.png">
        <mat-card-title *ngIf="isTitleArray" class="PostCard-Title">
               <div *ngFor="let word of title" [ngClass]="'PostCard-Title-Word--' + postDesign.palette">{{ word }}</div>
        </mat-card-title>
        <mat-card-subtitle [ngClass]="'PostCard-Subtitle--' + postDesign.palette">{{ elapsedTime }}</mat-card-subtitle>
        <div class="PostCard-Ribbon">
            <mat-icon [ngClass]="'PostCard-Ribbon-Icon--' + postDesign.palette" [inline]="true">{{ postDesign.icon }}</mat-icon>
            <svg width="100" height="100"><polygon [ngClass]="'PostCard-Ribbon-Svg--' + postDesign.palette" points="0,0 50,0 100,50 100,100" /></svg>
        </div>
    </mat-card-header>

    <mat-card-content>
        <p>{{ post.content }}</p>
    </mat-card-content>

    <mat-card-actions [ngClass]="'PostCard-Actions--' + postDesign.palette">
        <button (click)="likePost()" mat-button>
            <mat-icon>thumb_up</mat-icon>
            <span *ngIf="post.likesCount > 0">{{ post.likesCount }}</span>
        </button>
        <button mat-button (click)="toggleComments(post.id)">
            <mat-icon>chat_bubble</mat-icon>
            <ng-container *ngIf="commentsByPostId$(post.id) | async as comments">
                <span *ngIf="comments.length > 0; else commentsCountLight">{{ comments.length }}</span>
                <ng-template #commentsCountLight><span *ngIf="post.commentsCount > 0">{{ post.commentsCount }}</span></ng-template>
            </ng-container>
        </button>
    </mat-card-actions>
</mat-card>

<!-- Usual card comments -->
<div *ngIf="postDesign.componentStyle === 0" [@openClose]="commentsOpen ? 'open' : 'closed'" class="PostCard-Comments">
    <mat-divider></mat-divider>
    <mat-spinner *ngIf="(loadingPostsIds$ | async).includes(post.id); else commentsComponent" [color]="postDesign.palette" [diameter]="30"></mat-spinner>
    <ng-template #commentsComponent><ng-container *ngIf="commentsByPostId$(post.id) | async as comments">
        <app-comments [comments]="comments" [palette]="postDesign.palette" [postId]="post.id"></app-comments>
    </ng-container></ng-template>
</div>


<!-- Light card (no content, just title) -->
<mat-card *ngIf="postDesign.componentStyle === 1" [ngClass]="'PostCardLight--' + postDesign.palette">
    <div class="PostCardLight-Avatar">
        <img mat-card-avatar src="assets/images/gazgano-picture-64px.png">
    </div>

    <div *ngIf="!isTitleArray" class="PostCardLight-Title">{{ title }}</div>

    <mat-card-actions [ngClass]="'PostCardLight-Actions--' + postDesign.palette">
        <button mat-button (click)="likePost()">
            <mat-icon>thumb_up</mat-icon>
            <span *ngIf="post.likesCount > 0">{{ post.likesCount }}</span>
        </button>
        <button mat-button (click)="toggleComments(post.id)">
            <mat-icon>chat_bubble</mat-icon>
            <ng-container *ngIf="commentsByPostId$(post.id) | async as comments">
                <span *ngIf="comments.length > 0; else commentsCountLight">{{ comments.length }}</span>
                <ng-template #commentsCountLight><span *ngIf="post.commentsCount > 0">{{ post.commentsCount }}</span></ng-template>
            </ng-container>
        </button>
    </mat-card-actions>
</mat-card>

<!-- Light card comments -->
<div *ngIf="postDesign.componentStyle === 1" [@openClose]="commentsOpen ? 'open' : 'closed'" class="PostCardLight-Comments">
  <mat-divider></mat-divider>
  <mat-spinner *ngIf="(loadingPostsIds$ | async).includes(post.id); else commentsComponentLight" [color]="postDesign.palette" [diameter]="30"></mat-spinner>
  <ng-template #commentsComponentLight><ng-container *ngIf="commentsByPostId$(post.id) | async as comments">
      <app-comments [comments]="comments" [palette]="postDesign.palette" [postId]="post.id"></app-comments>
  </ng-container></ng-template>
</div>
